Running ExUnit with seed: 589190, max_cases: 24

20:24:01.944 [error] GenServer Machinery.Transitions terminating
** (ArgumentError) :utc_datetime expects microseconds to be empty, got: ~U[2026-01-18 23:24:01.941000Z]

Use `DateTime.truncate(utc_datetime, :second)` (available in Elixir v1.6+) to remove microseconds.

    (ecto 3.13.5) lib/ecto/type.ex:1573: Ecto.Type.check_no_usec!/2
    (ecto 3.13.5) lib/ecto/type.ex:614: Ecto.Type.dump_utc_datetime/1
    (ecto 3.13.5) lib/ecto/type.ex:1049: Ecto.Type.process_dumpers/3
    (ecto 3.13.5) lib/ecto/repo/schema.ex:1296: Ecto.Repo.Schema.dump_field!/6
    (ecto 3.13.5) lib/ecto/repo/schema.ex:1310: anonymous fn/6 in Ecto.Repo.Schema.dump_fields!/5
    (stdlib 6.2.2.2) maps.erl:860: :maps.fold_1/4
    (ecto 3.13.5) lib/ecto/repo/schema.ex:1308: Ecto.Repo.Schema.dump_fields!/5
    (ecto 3.13.5) lib/ecto/repo/schema.ex:1240: Ecto.Repo.Schema.dump_changes!/7
    (ecto 3.13.5) lib/ecto/repo/schema.ex:577: anonymous fn/15 in Ecto.Repo.Schema.do_update/4
    (ex_desk 0.1.0) lib/ex_desk/support/ticket_state_machine.ex:82: ExDesk.Support.TicketStateMachine.persist/2
    (machinery 1.1.0) lib/machinery/transition.ex:143: Machinery.Transition.run_or_fallback/6
    (machinery 1.1.0) lib/machinery/transitions.ex:51: Machinery.Transitions.handle_call/3
    (stdlib 6.2.2.2) gen_server.erl:2381: :gen_server.try_handle_call/4
    (stdlib 6.2.2.2) gen_server.erl:2410: :gen_server.handle_msg/6
    (stdlib 6.2.2.2) proc_lib.erl:329: :proc_lib.init_p_do_apply/3
Last message (from #PID<0.383.0>): {:run, %ExDesk.Support.Ticket{__meta__: #Ecto.Schema.Metadata<:loaded, "tickets">, id: 138, subject: "T1", description: "D1", status: "open", priority: :low, channel: :web, due_at: nil, first_response_at: nil, solved_at: nil, closed_at: nil, tags: [], custom_fields: %{}, requester_id: 4546, requester: #Ecto.Association.NotLoaded<association :requester is not loaded>, assignee_id: nil, assignee: #Ecto.Association.NotLoaded<association :assignee is not loaded>, group_id: nil, group: #Ecto.Association.NotLoaded<association :group is not loaded>, comments: #Ecto.Association.NotLoaded<association :comments is not loaded>, activities: #Ecto.Association.NotLoaded<association :activities is not loaded>, inserted_at: ~U[2026-01-18 23:24:01Z], updated_at: ~U[2026-01-18 23:24:01Z]}, ExDesk.Support.TicketStateMachine, "solved", None}


  1) test dashboard activities list_recent_activities/1 returns recent global activities (ExDesk.SupportActivityTest)
     test/ex_desk/support_activity_test.exs:8
     ** (ArgumentError) :utc_datetime expects microseconds to be empty, got: ~U[2026-01-18 23:24:01.941000Z]

     Use `DateTime.truncate(utc_datetime, :second)` (available in Elixir v1.6+) to remove microseconds.

     code: {:ok, _t1_updated} = Support.resolve_issue(t1, user.id)
     stacktrace:
       (machinery 1.1.0) lib/machinery.ex:116: Machinery.transition_to/4
       (ex_desk 0.1.0) lib/ex_desk/support/ticket_state_machine.ex:58: ExDesk.Support.TicketStateMachine.transition/2
       (ex_desk 0.1.0) lib/ex_desk/support.ex:250: ExDesk.Support.do_transition/5
       test/ex_desk/support_activity_test.exs:25: (test)


Finished in 0.3 seconds (0.00s async, 0.3s sync)
1 test, 1 failure
